import{m as D,r as o,u as g,k as w,x as I,w as F,c as K,j as s,i as m,L as O}from"./index-BMh66HCr.js";import{c as b}from"./clsx-B-dksMZM.js";import{u as P}from"./useCloseOnOutsideClick-BstDWFtL.js";import{u as A}from"./index.esm-ClWcd2Qo.js";import{X as R}from"./x-BzdX7HG_.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=D("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),_=(n,d)=>{const[t,a]=o.useState(-1),i=g(),u=o.useCallback(r=>{var l,p;r.key==="ArrowDown"?(a(c=>(c+1)%n),r.preventDefault()):r.key==="ArrowUp"?(a(c=>c===0?n-1:c-1),r.preventDefault()):r.key==="Enter"&&t>=0&&(r.preventDefault(),i(`/search?keyword=${(l=d[t])==null?void 0:l.keyword}&type=${(p=d[t])==null?void 0:p.type}`),window.location.reload())},[t,d,n,i]);return o.useEffect(()=>(window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}),[u]),[t,a]},M=({width:n,placeholder:d,type:t})=>{const[a,i]=o.useState(null),[u,r]=o.useState(!1),[l,p]=o.useState(""),[c,f]=o.useState(""),[j]=I(),v=j.get("keyword"),{pathname:y}=F(),x=g(),{register:S,handleSubmit:N}=A(),h=o.useCallback(async()=>{try{if(l){f(!0);const{data:e}=await K.get(`/api/search-keyword?keyword=${l}&fields=keyword,type,-_id&limit=3`);i(e.search),r(!0),f(!1)}else i(null),r(!1),f(!1)}catch(e){console.error(e),f(!1)}},[l]);o.useEffect(()=>{h()},[h]);const[$,k]=_(a==null?void 0:a.length,a),C=P(()=>{r(null),k(-1)});return s.jsx("form",{ref:C,onSubmit:N(e=>{x(`/search?keyword=${e.keyword}&type=${t||"default"}`),window.location.reload()}),className:"w-full flex justify-center ",children:s.jsx("div",{className:`"relative flex ${n}`,children:s.jsxs("div",{className:b("relative z-20 flex justify-center items-center",{"w-full sm:w-[400px] md:w-[450px] lg:w-[550px]":y.includes("search")},{"w-[320px] sm:w-[400px] md:w-[450px] lg:w-[550px]":!y.includes("search")}),children:[s.jsx("input",{...S("keyword",{value:v,onChange:e=>{p(e.target.value)}}),type:"text",placeholder:d||"Search for doctors, or anything?",className:"w-full border focus:border-blue-500 border-black-black/30 py-3 rounded-full pl-8 pr-2 outline-none peer"}),s.jsx(m,{className:"absolute left-2 fill-black-black/50 w-5 h-5 peer-focus:fill-blue-500"}),c&&s.jsx(T,{className:"absolute animate-spin right-2 size-4 "}),l&&!c&&s.jsx(R,{onClick:()=>{r(!1),p("")},className:"absolute right-2 size-4 cursor-pointer"}),u&&s.jsx("div",{className:"w-full absolute -z-20 top-5 bg-white-White pt-10 pb-3 rounded-b-xl rounded-t-md border",children:a==null?void 0:a.map((e,L)=>{const E=L===$;return s.jsx(O,{onClick:z=>{z.preventDefault(),k(-1),r(!1),x(`/search?keyword=${e.keyword}&type=${e.type}`)},className:b("block",{"border-blue-500 border":E}),to:`/search?keyword=${e.keyword}&type=${e.type}`,children:s.jsxs("div",{className:"flex gap-3 py-3 px-3",children:[s.jsx(m,{className:"size-5"}),s.jsx("div",{children:s.jsx("span",{children:e.keyword})})]})},e._id)})})]})})})};M.propTypes={width:w.string,placeholder:w.string,type:w.string};export{M as S};
