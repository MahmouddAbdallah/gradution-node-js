import{m as v,k as b,r as x,f as C,g,$ as T,j as e,v as E,d as I,c as N,a0 as y,a1 as p,U as O,w as A,u as S,L as j,a2 as D,a3 as L,a4 as _}from"./index-BMh66HCr.js";import{u as U}from"./useCloseOnOutsideClick-BstDWFtL.js";import{c as n}from"./clsx-B-dksMZM.js";import{c as R}from"./convertDate-DsGWlg30.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=v("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=v("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=v("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),w=({setOpen:a})=>{var u;const[c,r]=x.useState(""),[t,d]=x.useState(!1),h=C(),o=g(s=>s.notification);x.useEffect(()=>{h({type:T,limit:10})},[h]);const m=async()=>{var s,i;try{d(!0),await N.delete(`/api/notification/${c}`);const l=o.data.filter(k=>k._id!=c);h({type:y,notification:l}),d(!1)}catch(l){p.error(((i=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:i.message)||"There is an Error"),d(!1),console.error(l)}},f=async()=>{var s,i;try{d(!0);const{data:l}=await N.delete("/api/notification");h({type:y,notification:[]}),p.success(l.message),d(!1)}catch(l){p.error(((i=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:i.message)||"There is an Error"),d(!1),console.error(l)}};return console.log(o),e.jsxs("div",{children:[e.jsxs("div",{className:"py-3 flex justify-between md:justify-center border-b-2",children:[e.jsx("button",{onClick:f,className:"text-sm font-medium text-red-500 hidden md:block",children:"Delete All"}),e.jsx("div",{className:"flex-1 flex justify-center font-medium md:hidden",children:"Notification"}),e.jsx("button",{onClick:()=>{a(!1)},className:"md:hidden",children:e.jsx(z,{className:"stroke-black"})})]}),(u=o==null?void 0:o.data)==null?void 0:u.map(s=>{var i,l;return e.jsx("div",{className:"",children:e.jsxs("div",{className:"border-b-2",children:[e.jsxs("div",{className:" py-2 px-3 md:px-5 flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:"h-14 w-14 object-cover rounded-full",src:(i=s==null?void 0:s.from)==null?void 0:i.picture,alt:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium",children:(l=s==null?void 0:s.from)==null?void 0:l.name}),e.jsx("h3",{className:"text-xs ",children:s==null?void 0:s.message}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:n("w-2 h-2 rounded-full",{"bg-yellow-500":s.status=="pending"},{"bg-green-500":s.status=="approved"},{"bg-red-500":s.status=="rejected"})}),e.jsx("span",{className:"text-xs",children:s.status})]}),e.jsx("h3",{className:"text-xs font-medium",children:R(s==null?void 0:s.createdAt)})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>r(s._id==c?"":s._id),children:e.jsx(E,{})})})]}),c==(s==null?void 0:s._id)&&e.jsx("div",{className:"flex justify-center pb-2",children:e.jsx("button",{disabled:t,onClick:m,className:"text-sm text-red-500 font-medium",children:t?e.jsx(I,{className:"animate-spin"}):"Delete Notification"})})]})},s._id)})]})};w.propTypes={setOpen:b.func};const q=()=>{const[a,c]=x.useState(!1),r=x.useRef();return x.useEffect(()=>{const t=d=>{r.current&&!r.current.contains(d.target)&&c(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),e.jsxs("div",{ref:r,className:"flex items-center relative",children:[e.jsx("button",{onClick:()=>c(!a),children:e.jsx(P,{className:""})}),a&&e.jsx("div",{className:"text-black-black fixed top-0 max-md-left-0 w-full h-full md:absolute border-2 bg-white-White min-h-96 md:w-[450px] md:right-0 md:top-8 z-50 md:rounded-md",children:e.jsx(w,{setOpen:c})})]})},F=({isMenu:a})=>{const[c,r]=x.useState(!1),{user:t}=O(),d=U(()=>{r(!1)}),{pathname:h}=A(),o=g(u=>u.cart.count),m=S(),f=async()=>{const{data:u}=await N.get("/api/logout");console.log(u),m("/sign-in"),r(!1),document.body.style.overflowY="auto",window.location.reload()};return t&&e.jsx("div",{children:e.jsxs("div",{ref:d,className:n("relative min-w-[150px] flex justify-center",{"flex-col border-b":a}),children:[e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>{r(!c)},className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-center md:justify-normal px-1 py-3 md:py-1 gap-2 md:hover:bg-black-black/10  duration-300 rounded-md",children:[e.jsx("div",{className:"font-medium",children:t==null?void 0:t.name}),e.jsx("div",{className:" h-7 w-7 bg-white-White rounded-md overflow-hidden",children:e.jsx("img",{className:" h-8 w-8 object-cover ",src:t==null?void 0:t.picture,alt:""})})]})}),e.jsxs("div",{className:n("hidden md:flex gap-3",{"stroke-white-White":a}),children:[e.jsx(q,{}),h.includes("store")&&e.jsxs(j,{className:"flex relative",to:"/store/cart",children:[e.jsx(W,{}),o?e.jsx("div",{className:" absolute -right-2 -top-1 flex justify-center items-center text-xs bg-blue-500 text-white-White rounded-full w-4 h-4",children:o}):""]})]})]}),c&&e.jsx("div",{className:n({"static md:absolute w-full slow top-10 text-black-black bg-blue-300 dark:bg-gray-700 dark:md:bg-gray-700 px-2 py-2 rounded-md z-50":!a}),children:e.jsxs("ul",{className:n(" space-y-1 ",{"border-t":a}),children:[e.jsx("li",{children:e.jsx(j,{onClick:()=>{r(!1),document.body.style.overflowY="auto"},to:`/profile/${t==null?void 0:t._id}`,children:e.jsxs("div",{className:n("flex px-2 py-3 dark:hover:bg-gray-900 rounded-md",{"hover:bg-blue-200":!a}),children:[e.jsx("div",{children:!a&&e.jsx(D,{className:"w-6 h-6"})}),e.jsx("div",{className:" w-full flex justify-center",children:e.jsx("span",{children:" Profile"})})]})})}),e.jsx("li",{className:n({"border-t":a}),children:e.jsx(j,{to:"/dashboard",onClick:()=>{r(!1),document.body.style.overflowY="auto"},className:"",children:e.jsxs("div",{className:n("flex px-2 py-3 dark:hover:bg-gray-900 rounded-md",{"hover:bg-blue-200":!a}),children:[e.jsx("div",{children:!a&&e.jsx(L,{className:"w-6 h-6"})}),e.jsx("div",{className:" w-full flex justify-center",children:e.jsx("span",{children:" Dashboard"})})]})})}),e.jsx("li",{className:n({"border-t":a}),children:e.jsx("button",{onClick:f,className:" w-full",children:e.jsxs("div",{className:n("flex px-2 py-3 dark:hover:bg-gray-900 rounded-md",{"hover:bg-blue-200":!a}),children:[e.jsx("div",{children:!a&&e.jsx(_,{className:"w-6 h-6"})}),e.jsx("div",{className:" w-full flex justify-center",children:e.jsx("span",{children:" Log out"})})]})})})]})})]})})};F.propTypes={isMenu:b.bool,close:b.any};export{z as A,q as N,W as S,F as U};
